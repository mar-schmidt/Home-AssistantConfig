input_select:
  playlist:
    name: 'Select Spotify Playlist:'
    options:
      - "Sweden Top 50"
      - "Middagsbjudningen"
      - "Mood Booster"
      - "Feeling good låtar!"
      - "Akustisk Vinter"

  speaker:
    name: 'Select Speaker:'
    icon: mdi:speaker-wireless
    options:
      - Kök

script:
  play_spotify_playlist_turn_on:
    alias: 'Play'
    sequence:
      - service: script.turn_on
        entity_id: script.play_spotify_playlist
        data_template:
          variables:
              speaker: >
                {% if is_state("input_select.speaker", "Kök") %}
                  media_player.kok
                {% endif %}
              source: >
                {% if is_state("input_select.playlist", "Sweden Top 50") %}
                  "Sweden Top 50"
                {% elif is_state("input_select.playlist", "Middagsbjudningen") %}
                  "Middagsbjudningen"
                {% elif is_state("input_select.playlist", "Mood Booster") %}
                  "Mood Booster"
                {% elif is_state("input_select.playlist", "Feeling good låtar!") %}
                  "Feeling good låtar!"
                {% elif is_state("input_select.playlist", "Akustisk Vinter") %}
                  "Akustisk Vinter"
                {% endif %}
  play_spotify_playlist:
    alias: 'Play'
    sequence:
#       Set the volume to 40% on all speakers
      - service: media_player.volume_set
        data_template:
          entity_id: >
            {% if is_state("input_select.speaker", "Kök") %}
              media_player.kok
            {% endif %}
        data:
          volume_level: 0.4
#       Select source from "Sonos Favorites" list (must exist). Uses "select_source"
#       More info: https://community.home-assistant.io/t/sonos-the-easiest-way-of-setting-playlist-or-radio-streams/9347
#       Even more: https://home-assistant.io/components/media_player/#service-media_playerselect_source
      - service: media_player.select_source
        data_template:
          entity_id: >
            {% if is_state("input_select.speaker", "Kök") %}
              media_player.kok
            {% endif %}
          source: "{{ states.input_select.playlist.state }}"
      - service: media_player.media_play
        data_template:
          entity_id: >
            {% if is_state("input_select.speaker", "Kök") %}
              media_player.kok
            {% endif %}
